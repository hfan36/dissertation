\chapter{RECONSTRUCTION CODE}\label{app:reconcode}
The reconstruction code can be pulled from a public repository at: \url{https://hxfan@bitbucket.org/hxfan/ct_reconstruction.git}.

The main class used to calculate image reconstruction is called: siddon\_recon.  This class has three main functions, a1\_FORWARD\_PROJECTION(), a1\_RECON\_MLEM(), and a1\_BACKWARD\_PROJECTION.  The function that is used to for image reconstruction is called a0\_RECON\_MLEM, which is an iterative MLEM algorithm.  The forward and backward projection functions can be used for simulation.  The forward projection function can be used to calculate projection images of a simulated phantom.  This function can be very helpful in diagnosing problems occurred in the reconstruction due to a mis-calibration especially when the simulated phantom can be printed using a rapid prototype printer.  Phantoms designed in SolidWorks can be used as input in the forward projection function.  For detail converting SolidWorks models to binary file is found in Jared Moore's dissertation~\citep{Moore2011}.

The input for all three functions is a configuration text file, which sets the geometry of the CT system, detector size, object volume, and scan parameters.  This text file is used to modified the parameter values without recompiling the reconstruction code.  The configuration file also includes the file paths of the projection images for the reconstruction and backward projection function, and the object volume file name for the forward projection function.  The file paths were setup so the images used in the backward projection and reconstruction function do not need to be loaded into the computer's RAM all at once, which saves a lot of the computer's memory since the projection images can be quite large.

Once the reconstruction code is compiled, the program will first check for data files and size consistencies against the values in the configuration file before proceeding to do any calculations.  However, it will not check for the memory size so one must make sure both the host and device has enough RAM for the calculation.  As a default setting, after each MLEM iteration, the reconstruction function will write the reconstructed object to a file in the folder set in the configuration file, if the folder is left empty, then folder that house the projection images will be used.  A configuration file will also be written to the same file location as the reconstructed object at the end of the execution to record the values that was used in reconstruction algorithm.  This file has the extension, ``.info'' to differentiate between the input configuration file that normally has the extension ``.cfg''.  All outputs of the functions are written in binary in ``little-endian'' as floats.  The inputs used in the functions are also required to be saved in the same format.

The origin, (0, 0, 0), is located at the center of the object volume.  A shift can be added to the object volume under ``object parameters''.  The default detector center is calculated with respect to the number of transaxial and axial pixels, a shift can be added to indicate that the projection images on detector are shifted.  This can be useful if the projection images from the camera are cropped with a shift off-center.

The version control software, git, can be downloaded at: \url{http://git-scm.com/}.  It can be used for any types of files, such as LabView vis, MatLab scripts, C++/C files, and tex files. A quick tutorial can be found at \url{http://git-scm.com/docs/gittutorial}.






